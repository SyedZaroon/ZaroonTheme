{% comment %}
  Section: Collections Display
  Features:
  - Choose All Collections OR Custom (multiple selectable via blocks)
  - Layout option: Grid or Scrollable Flex
{% endcomment %}

<section class="collections-section">
  <div class="container space-section">
    <h3>Collection </h3>
    <div class="collections-wrapper {{ section.settings.layout_style }}">
      {% if section.settings.collection_type == 'all' %}
        {% for collection in collections %}
          {% if collection != blank %}
            <div class="collection-item">
              <a href="{{ collection.url }}">
                {% if collection.image %}
                  <img src="{{ collection.image | image_url: width: 400 }}" alt="{{ collection.title }}" width="auto" height="auto">
                {% else %}
                  <div class="placeholder">No Image</div>
                {% endif %}
                <h3>{{ collection.title }}</h3>
              </a>
            </div>
          {% endif %}
        {% endfor %}
      
      {% elsif section.settings.collection_type == 'custom' %}
        {% for block in section.blocks %}
          {% if block.settings.collection != blank %}
            {% assign collection = collections[block.settings.collection] %}
            {% if collection %}
              <div class="collection-item">
                <a href="{{ collection.url }}">
                  {% if collection.image %}
                    <img src="{{ collection.image | image_url: width: 400 }}" alt="{{ collection.title }}" width="auto" height="auto">
                  {% else %}
                    <div class="placeholder">No Image</div>
                  {% endif %}
                  <h3>{{ collection.title }}</h3>
                </a>
              </div>
            {% endif %}
          {% endif %}
        {% endfor %}
      {% endif %}
    </div>

  </div>
</section>

{% schema %}
{
  "name": "Custom Collection",
  "settings": [
    {
      "type": "select",
      "id": "collection_type",
      "label": "Choose Collections",
      "options": [
        { "value": "all", "label": "All Collections" },
        { "value": "custom", "label": "Custom Collections" }
      ],
      "default": "all"
    },
    {
      "type": "select",
      "id": "layout_style",
      "label": "Layout Style",
      "options": [
        { "value": "grid", "label": "Grid" },
        { "value": "flex-scroll", "label": "Scrollable Flex" }
      ],
      "default": "grid"
    }
  ],
  "blocks": [
    {
      "type": "collection_block",
      "name": "Collection",
      "settings": [
        {
          "type": "collection",
          "id": "collection",
          "label": "Select Collection"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Custom Collection",
      "category": "Collections"
    }
  ]
}
{% endschema %}

{% stylesheet %}
.collections-wrapper.grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 20px;
}

.collections-wrapper.flex-scroll {
  display: flex;
  gap: 16px;
  overflow-x: auto;
  scroll-snap-type: x mandatory;
  padding-bottom: 10px;
}
.collections-wrapper.flex-scroll .collection-item {
  flex: 0 0 auto;
  scroll-snap-align: start;
  width: 200px;
}

.collection-item {
  background: #fff;
  border: 1px solid #eee;
  border-radius: 10px;
  text-align: center;
  padding: 10px;
  transition: transform 0.3s ease;
}
.collection-item:hover {
  transform: translateY(-5px);
}
.collection-item img {
  width: 100%;
  height: auto;
  border-radius: 8px;
}
.collection-item h3 {
  font-size: 16px;
  margin-top: 10px;
}
{% endstylesheet %}
